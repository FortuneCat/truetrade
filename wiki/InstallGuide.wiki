#labels Phase-Deploy,Featured
#Install Guide

= Introduction =

This is the install guide.  *A work in progress*

= Details =

== Install from ZIP ==

Note that the ZIP files are limited.  You will not be able to create and run your own strategies.  Users are encouraged to use the source distribution (below).

  # Download and install [http://java.sun.com/javase/downloads/index.jsp Java 6]
  # Download and install [http://mysql.org/downloads/mysql/5.0.html#downloads MySQL v5+]
  # Configure the MySQL Database using the [http://truetrade.googlecode.com/svn/trunk/com.ats.model/src/create_tables.sql create_tables.sql] script
  # Download and unzip latest [http://code.google.com/p/truetrade/downloads/detail?name=TrueTradeClient.zip&can=2&q= TrueTrade Client Builder] file from the Downloads
  # Unpack the zip file and run {{{TrueTrade/TrueTrade.exe}}}.  It will probably generate lots of errors because your database hasn't been configured yet.
  # Run Windows > Preferences > Databases and set the following:
    * JDBC URL: {{{jdbc:mysql://localhost/ats?enable-named-pipe&socketFactory=com.mysql.jdbc.NamedPipeSocketFactory }}}
    * JDBC Provider: {{{ com.mysql.jdbc.Driver }}}
  # Click Apply or OK.  You will probably get an error message saying that there was a problem, but it shouldn't affect the saving of your preferences (defect 26).  Exit and then restart.  The client should come up without any errors
  

== Install from Source ==

  # Download and install [http://java.sun.com/javase/downloads/index.jsp Java 6]
  * Download and install [http://www.eclipse.org/downloads/ eclipse v3.2]
  * Install Subclipse plugin (http://subclipse.tigris.org/):
    * In Eclipse, run Help > Software Updates > Find and Install...
    * In the "Feature Updates" window, click "Search for new features to install" and click "Next"
    * Click "New Remote Site", and in the dialog enter:
      * Name: Subclipse Update Site
      * URL: http://subclipse.tigris.org/update_1.2.x
      Then make sure your new update site is selected and click Finish
    * In the "Search Results" dialog, expand the "Subclipse Update site" entry and select "Subclipse" and follow the rest of the wizard.
  * Install and [http://www.eclipse.org/gef/ Draw2d and GEF] from eclipse.org:
    * Download [http://www.eclipse.org/downloads/download.php?file=/tools/gef/downloads/drops/R-3.2.2-200702081315/GEF-runtime-3.2.2.zip GEF v3.2.2 Runtime] 
    * Extract the zip into your eclipse directory.  The ZIP file has a features and plugin folder which should extract into your eclipse's features and plugin folder.
    * After extracting the ZIP, restart eclipse.
  * Download and install [http://mysql.org/downloads/mysql/5.0.html#downloads MySQL v5+]
  * Start Eclipse and select a new directory for the ATS workspace:
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/1-select-workspace.png
  When Eclipse starts, you will have a blank workspace:
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/2-blank-workspace.png
  * In the Package Explorer, "Right Click > Import > Other > Checkout Projects from SVN" http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/import-projects.png
  Select "Create a new repository location" and in the "Select/Create Location" field, enter "{{{http://truetrade.googlecode.com/svn/trunk/}}}" and click Next.  (_Google tells you to use "{{{http://truetrade.googlecode.com/svn/trunk/truetrade}}}" but I have not been able to get this to work, -t._)  You should see a listing of the different projects stored in SVN:
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/select-folder.png
  * Select {{{com.ats.resources}}} and click "Next".  In the "Check Out As" page, you can select "Revision" then click "Show Log" to see which versions exist.  Select v0.5Alpha or the latest version similar to this.  If you want the latest code, select "Head Revision" (_I haven't figured out versioning yet, so you'll have to start with Head until I do, sorry. -t._)  Click Finish.
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/check-out-as.png
    * When it completes, you will have errors in the project.  Ignore this for the moment, we will fix the errors in a couple steps
    http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/import-com-ats-resources.png
  * Repeat this process with the projects  (ignore 'com.ats.client.custom'):
    * {{{com.ats.model}}}
    * {{{com.ats.client}}}
    * {{com.ats.client.runtime}}}
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/all-imported.png
  * The compile errors occur because we are still missing some JAR files.  Go to http://code.google.com/p/truetrade/downloads/list and download the "Missing lib" JARS into a temp directory:
    * js.jar
    * itext-1.4.3.jar
    * jfreechart-1.0.2.jar
    * ibatis-2.3.0.677.jar
  * move the ibatis jar to the {{{lib}}} directory under the {{{com.ats.model}}} project, move all of the others to the {{{lib}}} directory under the {{{com.ats.resources}}} project.  When you have moved all of the JARs, "right click the project > Refresh" to get Eclipse to pick up the new JARs.
  * Many errors will go away, but some remain.  To fix these, go to "Window > Preferences > Java > Compiler" and set the "Compiler compliance level" to 5.0.  When you click OK, it will ask to do a full rebuild, click OK.
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/java-compiler-prefs.png
  If you still have any errors, do a "Team > Update" to get the latest source.

  * Create the MySQL database and tables using com.ats.model/create_tables.sql
Now that you have the Source, you can run the client.  To do this, you will need to configure the Eclipse runtime.
  * Right-click the "com.ats.client" project and select "Run As > Eclipse Application".  You will get a splash screen and then the TrueTrade Client will come up with nothing in it.
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/true-trade-client.png

  * Exit the TrueTrade Client and, back in Eclipse, open "Run > Run..." to get the Run dialog.  Select "Eclipse Application > Eclipse Application".  This is the client builder, so change the name to "TrueTrade Client builder" and in the Arguments tab add the VM argument -Xmx256m".
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/run-dlg.png
    Click "Apply" and "Close".  Now the Run button should have the TrueTrade client ready to run.
http://truetrade.googlecode.com/svn/trunk/com.ats.client/html/gettingstarted/run-pulldown.png
    
  * Now you can add instruments and strategies (there are sample strategies in the com.ats.model project under com.ats.strategy).


== Common Problems ==

  * If you have installed MySQL and ran the create_tables.sql script but you see NullPointerExceptions appear in the TrueTradeClient when you start it up, check the Eclipse console.  If you see messages like:
{{{
java.io.FileNotFoundException
MESSAGE: \\.\pipe\MySQL (The system cannot find the file specified)

STACKTRACE:

java.io.FileNotFoundException: \\.\pipe\MySQL (The system cannot find the file specified
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.(Unknown Source)
	at java.io.RandomAccessFile.(Unknown Source)
	at com.mysql.jdbc.NamedPipeSocketFactory$NamedPipeSocket.(NamedPipeSocketFactory.java:57)
}}}
  Then you will need to remove the NamedPipeSocketFactory from the MySQL URL.  In the TrueTrade Client, run "Windows > Preferences > Databases" and change the URL to {{{jdbc:mysql://localhost/ats}}}  (i.e.: remove the "?" and everything after it)




